#!/bin/bash
# Check Python availability
if command -v python3 > /dev/null 2>&1; then
   python_cmd="python3"
elif command -v python > /dev/null 2>&1; then
   python_cmd="python"
else
   echo "WARNING: Python3 is not installed."
   exit 1
fi

# Function to display a Tkinter message box
show_message_box() {
    local message="$1"
    $python_cmd - <<EOF
import tkinter as tk
from tkinter import messagebox
root = tk.Tk()
root.withdraw()
messagebox.showinfo("Genie GitHooks", '$message')
EOF
}

# Get commit details
commit_id=$(git rev-parse HEAD)
commit_message=$(git log --format=%B -n 1 "$commit_id")
branch=$(git rev-parse --abbrev-ref HEAD)
repo_name=$(git config --get remote.origin.url | sed 's#.*/##;s/.git//' 2>/dev/null || basename "$(pwd)")

echo "Commit completed successfully!"
echo "Commit ID: $commit_id"
echo "Branch: $branch"
echo "Repository: $repo_name"
echo "Message: $commit_message"

# Optional: Show completion message
# show_message_box "Commit completed successfully in branch: $branch"

exit 0  